CONTIKI_PROJECT = node
all: $(CONTIKI_PROJECT)

CONTIKI=../../../../../..

FIRMWARE_TYPE=@FIRMWARE_TYPE@

# slotframe settings
CFLAGS += -DTSCH_SCHEDULE_CONF_DEFAULT_LENGTH=@TSCH_SCHEDULE_CONF_DEFAULT_LENGTH@
CFLAGS += -DORCHESTRA_CONF_UNICAST_PERIOD=@ORCHESTRA_CONF_UNICAST_PERIOD@

CFLAGS += -DSEND_INTERVAL_SEC=@SEND_INTERVAL_SEC@

MAKE_MAC = MAKE_MAC_TSCH
MAKE_ROUTING = MAKE_ROUTING_RPL_CLASSIC

# 6tisch minimal
FIRMWARE_TYPE_6TISCH_MIN=1
# receiver based Orchestra + RPL
FIRMWARE_TYPE_ORCHESTRA_RB=2

CFLAGS += -DFIRMWARE_TYPE=$(FIRMWARE_TYPE)

ifneq ($(FIRMWARE_TYPE),$(FIRMWARE_TYPE_6TISCH_MIN))
# compile Orchestra
MODULES += os/services/orchestra
endif

# Energy usage estimation
MODULES += os/services/simple-energest

include $(CONTIKI)/Makefile.include
